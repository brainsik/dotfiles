#!/usr/bin/env bash
#
# Installs the Eternal Terminal (et) package
#
set -eu -o pipefail
codename=$(lsb_release --codename --short 2>/dev/null)

echo "ðŸ’¾ Installing Eternal Terminal (et) â€¦"

echo "ðŸ¤– [et] Configuring apt repo"
curl -sSL https://github.com/MisterTea/debian-et/raw/master/et.gpg | sudo tee /usr/share/keyrings/et.gpg >/dev/null
echo "# Eternal Terminal packages for debian trixie" | sudo tee -a /etc/apt/sources.list.d/et.list
echo "deb [signed-by=/usr/share/keyrings/et.gpg] https://mistertea.github.io/debian-et/debian-source/ $codename main" | sudo tee -a /etc/apt/sources.list.d/et.list

echo "ðŸ¤– [et] Installing apt packages"
sudo apt update
sudo apt install et

echo "ðŸ¤– [et] Disabling telemetry"
sudo perl -i -pe 's/telemetry = true/telemetry = false/;' /etc/et.cfg
sudo systemctl restart et

echo "âœ… Eternal Terminal installed."
